<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alex Prime - Agent Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        .glass { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .pulse { animation: pulse 2s infinite; }
        .pulse-fast { animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .glow { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
        .glow-green { box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
        .glow-yellow { box-shadow: 0 0 20px rgba(245, 158, 11, 0.4); }
        .slide-in { animation: slideIn 0.5s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen text-white p-4 md:p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header with Live Status -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                    ðŸŽ¯ Alex Prime Dashboard
                </h1>
                <p class="text-gray-400 mt-1 text-sm">Executive Director Agent â€¢ Real-time Tracking</p>
            </div>
            <div class="flex items-center gap-4">
                <!-- LIVE STATUS INDICATOR -->
                <div id="live-status" class="flex items-center gap-3 glass px-4 py-3 rounded-xl glow-green">
                    <div class="relative">
                        <span id="status-dot" class="w-4 h-4 bg-green-500 rounded-full block pulse-fast"></span>
                        <span class="absolute inset-0 w-4 h-4 bg-green-500 rounded-full animate-ping opacity-50"></span>
                    </div>
                    <div>
                        <div id="status-text" class="font-semibold text-green-400">ACTIVE</div>
                        <div id="current-task" class="text-xs text-gray-400">Building dashboard...</div>
                    </div>
                </div>
                <div class="text-right text-sm text-gray-400 hidden md:block">
                    <div id="current-time"></div>
                    <div id="last-update">Last update: --</div>
                </div>
            </div>
        </header>

        <!-- Quick Stats Row -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6">
            <div class="glass rounded-xl p-4 md:p-5 glow">
                <div class="text-gray-400 text-xs md:text-sm">In Progress</div>
                <div class="text-2xl md:text-3xl font-bold text-orange-400" id="tasks-progress">1</div>
                <div class="text-xs text-orange-300 mt-1">ðŸ”´ Active now</div>
            </div>
            <div class="glass rounded-xl p-4 md:p-5">
                <div class="text-gray-400 text-xs md:text-sm">Pending</div>
                <div class="text-2xl md:text-3xl font-bold text-yellow-400" id="tasks-pending">5</div>
                <div class="text-xs text-yellow-300 mt-1">ðŸŸ¡ Queued</div>
            </div>
            <div class="glass rounded-xl p-4 md:p-5">
                <div class="text-gray-400 text-xs md:text-sm">Completed</div>
                <div class="text-2xl md:text-3xl font-bold text-green-400" id="tasks-completed">8</div>
                <div class="text-xs text-green-300 mt-1">âœ… Done</div>
            </div>
            <div class="glass rounded-xl p-4 md:p-5">
                <div class="text-gray-400 text-xs md:text-sm">Est. Cost Today</div>
                <div class="text-2xl md:text-3xl font-bold text-blue-400" id="cost-today">$6.25</div>
                <div class="text-xs text-gray-500 mt-1">API usage</div>
            </div>
        </div>

        <!-- Main Grid: Tasks + Status -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            
            <!-- IN PROGRESS - Prominent -->
            <div class="glass rounded-xl p-6 glow-yellow lg:col-span-2">
                <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    ðŸ”´ Currently Working On
                </h2>
                <div id="in-progress-tasks" class="space-y-3">
                    <div class="flex items-start gap-3 p-4 bg-orange-900/30 rounded-lg border border-orange-500/30 slide-in">
                        <span class="w-3 h-3 bg-orange-500 rounded-full mt-1 pulse-fast"></span>
                        <div class="flex-1">
                            <div class="font-medium text-orange-300">Build enhanced dashboard with task tracking</div>
                            <div class="text-sm text-gray-400 mt-1">Adding TODO visualization, live status indicator</div>
                            <div class="text-xs text-gray-500 mt-2">Started: 2026-02-02 01:52 UTC</div>
                        </div>
                    </div>
                </div>
                <div id="no-active" class="hidden text-gray-500 text-center py-8">
                    <div class="text-4xl mb-2">ðŸ˜´</div>
                    <div>No active tasks â€” Agent is idle</div>
                </div>
            </div>

            <!-- Live Agent Info -->
            <div class="glass rounded-xl p-6">
                <h2 class="text-xl font-semibold mb-4">âš¡ Agent Status</h2>
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 bg-gray-800/50 rounded-lg">
                        <span class="text-gray-400">State</span>
                        <span id="agent-state" class="text-green-400 font-medium">Working</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-800/50 rounded-lg">
                        <span class="text-gray-400">Model</span>
                        <span class="text-purple-400 font-medium text-sm">Claude Opus 4.5</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-800/50 rounded-lg">
                        <span class="text-gray-400">Session</span>
                        <span class="text-blue-400 font-medium">main</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-800/50 rounded-lg">
                        <span class="text-gray-400">Heartbeat</span>
                        <span id="last-heartbeat" class="text-yellow-400 font-medium">--:--</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-800/50 rounded-lg">
                        <span class="text-gray-400">Uptime</span>
                        <span id="uptime" class="text-gray-300 font-medium">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pending & Completed Tasks -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Pending Tasks -->
            <div class="glass rounded-xl p-6">
                <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    ðŸŸ¡ Pending Tasks
                </h2>
                <div id="pending-tasks" class="space-y-2 max-h-80 overflow-y-auto">
                    <div class="flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        <span class="flex-1">Vercel deployment</span>
                        <span class="text-xs text-yellow-400 px-2 py-1 bg-yellow-900/30 rounded">Medium</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        <span class="flex-1">Profile drafts review</span>
                        <span class="text-xs text-red-400 px-2 py-1 bg-red-900/30 rounded">High</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        <span class="flex-1">Google Calendar integration</span>
                        <span class="text-xs text-yellow-400 px-2 py-1 bg-yellow-900/30 rounded">Medium</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        <span class="flex-1">Email monitoring setup</span>
                        <span class="text-xs text-yellow-400 px-2 py-1 bg-yellow-900/30 rounded">Medium</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition">
                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                        <span class="flex-1">Subagent pyramid</span>
                        <span class="text-xs text-gray-400 px-2 py-1 bg-gray-700/50 rounded">Low</span>
                    </div>
                </div>
            </div>

            <!-- Completed Tasks -->
            <div class="glass rounded-xl p-6">
                <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    âœ… Completed
                </h2>
                <div id="completed-tasks" class="space-y-2 max-h-80 overflow-y-auto">
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">Dashboard creation</span>
                        <span class="text-xs text-gray-500">Feb 1</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">GitHub repo setup</span>
                        <span class="text-xs text-gray-500">Feb 2</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">GitHub Pages deployment</span>
                        <span class="text-xs text-gray-500">Feb 2</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">6-model fallback chain</span>
                        <span class="text-xs text-gray-500">Feb 2</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">Daily summary cron</span>
                        <span class="text-xs text-gray-500">Feb 1</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">Heartbeat status updates</span>
                        <span class="text-xs text-gray-500">Feb 1</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">LLM providers configured</span>
                        <span class="text-xs text-gray-500">Feb 1</span>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-green-900/20 rounded-lg">
                        <span class="text-green-500">âœ“</span>
                        <span class="flex-1 text-gray-300">Cloudflare tunnel setup</span>
                        <span class="text-xs text-gray-500">Feb 1</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Chart & Model Info -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <div class="glass rounded-xl p-6 lg:col-span-2">
                <h2 class="text-xl font-semibold mb-4">ðŸ“Š Task Completion Trend</h2>
                <canvas id="activityChart" height="150"></canvas>
            </div>

            <div class="glass rounded-xl p-6">
                <h2 class="text-xl font-semibold mb-4">ðŸ¤– Model Stack</h2>
                <div class="space-y-3 text-sm">
                    <div class="p-3 bg-blue-900/30 rounded-lg border border-blue-500/30">
                        <div class="text-blue-400 font-medium">Primary</div>
                        <div class="text-gray-300">Claude Opus 4.5</div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="text-gray-400 font-medium">Fallback 1</div>
                        <div class="text-gray-300">Groq Llama 3.3</div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="text-gray-400 font-medium">Fallback 2</div>
                        <div class="text-gray-300">NVIDIA Kimi K2.5</div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="text-gray-400 font-medium">Fallback 3</div>
                        <div class="text-gray-300">OpenRouter Llama/Qwen</div>
                    </div>
                    <div class="p-3 bg-gray-800/50 rounded-lg">
                        <div class="text-gray-400 font-medium">Last Resort</div>
                        <div class="text-gray-300">Moonshot Kimi K2</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Backlog Preview -->
        <div class="glass rounded-xl p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">ðŸ“‹ Backlog (Future Ideas)</h2>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Cost alerts</span>
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Multi-agent dashboard</span>
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Voice summaries</span>
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Twitter monitoring</span>
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Automated email drafts</span>
                <span class="px-3 py-1 bg-gray-700/50 rounded-full text-sm text-gray-400">Weekly reports</span>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm py-4">
            Alex Prime Dashboard v2.0 â€¢ Built for Kabundji â€¢ 
            <a href="https://github.com/ALEXPRIME000/alex-dashboard" class="text-blue-400 hover:underline">GitHub</a>
        </footer>
    </div>

    <script>
        // Update time
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleString();
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Fetch live status
        async function fetchStatus() {
            try {
                const res = await fetch('status.json?' + Date.now());
                const data = await res.json();
                
                // Update status indicator
                document.getElementById('status-text').textContent = data.status.toUpperCase();
                document.getElementById('current-task').textContent = data.currentTask || 'Monitoring...';
                document.getElementById('last-update').textContent = 'Updated: ' + new Date(data.lastUpdate).toLocaleTimeString();
                document.getElementById('last-heartbeat').textContent = new Date(data.heartbeat?.lastCheck || Date.now()).toLocaleTimeString();
                
                // Update stats
                if (data.stats) {
                    document.getElementById('cost-today').textContent = '$' + (data.stats.costEstimated || 0).toFixed(2);
                }
                
                // Status styling
                const statusDiv = document.getElementById('live-status');
                const statusDot = document.getElementById('status-dot');
                const agentState = document.getElementById('agent-state');
                
                if (data.status === 'active' || data.status === 'working') {
                    statusDiv.className = 'flex items-center gap-3 glass px-4 py-3 rounded-xl glow-green';
                    statusDot.className = 'w-4 h-4 bg-green-500 rounded-full block pulse-fast';
                    document.getElementById('status-text').className = 'font-semibold text-green-400';
                    agentState.textContent = 'Working';
                    agentState.className = 'text-green-400 font-medium';
                } else if (data.status === 'idle') {
                    statusDiv.className = 'flex items-center gap-3 glass px-4 py-3 rounded-xl glow-yellow';
                    statusDot.className = 'w-4 h-4 bg-yellow-500 rounded-full block pulse';
                    document.getElementById('status-text').className = 'font-semibold text-yellow-400';
                    agentState.textContent = 'Idle';
                    agentState.className = 'text-yellow-400 font-medium';
                }
            } catch (e) {
                console.log('Status fetch error:', e);
            }
        }
        
        // Refresh status every 30 seconds
        fetchStatus();
        setInterval(fetchStatus, 30000);

        // Activity Chart
        const activityCtx = document.getElementById('activityChart').getContext('2d');
        new Chart(activityCtx, {
            type: 'bar',
            data: {
                labels: ['Jan 31', 'Feb 1', 'Feb 2'],
                datasets: [{
                    label: 'Completed',
                    data: [2, 5, 3],
                    backgroundColor: 'rgba(16, 185, 129, 0.7)',
                    borderRadius: 4
                }, {
                    label: 'In Progress',
                    data: [1, 2, 1],
                    backgroundColor: 'rgba(245, 158, 11, 0.7)',
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                plugins: { 
                    legend: { 
                        position: 'top',
                        labels: { color: '#9ca3af' } 
                    } 
                },
                scales: {
                    x: { 
                        grid: { color: 'rgba(255,255,255,0.1)' }, 
                        ticks: { color: '#9ca3af' } 
                    },
                    y: { 
                        grid: { color: 'rgba(255,255,255,0.1)' }, 
                        ticks: { color: '#9ca3af' },
                        beginAtZero: true
                    }
                }
            }
        });

        // Calculate uptime (simulated from session start)
        const sessionStart = new Date('2026-01-31T13:42:00Z');
        function updateUptime() {
            const now = new Date();
            const diff = now - sessionStart;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            document.getElementById('uptime').textContent = `${days}d ${hours}h`;
        }
        updateUptime();
        setInterval(updateUptime, 60000);
    </script>
</body>
</html>
