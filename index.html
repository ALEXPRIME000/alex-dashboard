<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Pulse Graphix ‚Äî Executive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { DEFAULT: '#00FF00', dark: '#0a0a0a', card: '#111111', border: '#222222', muted: '#888888' }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0a0a0a; }
        .glass { background: #111111; border: 1px solid #222; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .glass:hover { border-color: #00FF00; transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0, 255, 0, 0.1); }
        .pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }
        .beam { position: relative; overflow: hidden; }
        .beam::before { content:''; position:absolute; top:-2px; left:-2px; right:-2px; bottom:-2px; background: conic-gradient(from 0deg, transparent, #00FF00, transparent, transparent); border-radius: inherit; animation: beam-spin 3s linear infinite; z-index:-1; }
        @keyframes beam-spin { to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn .5s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
        .slide-in { animation: slideIn .4s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes slideIn { from{opacity:0;transform:translateX(-20px)} to{opacity:1;transform:translateX(0)} }
        .tab-content { display:none; }
        .tab-content.active { display:block; }
        .nav-btn { transition: all .3s cubic-bezier(0.4, 0, 0.2, 1); }
        .nav-btn.active { color: #00FF00; border-color: #00FF00; background: rgba(0, 255, 0, 0.05); }
        .nav-btn:hover { color: #00FF00; background: rgba(0, 255, 0, 0.03); }
        .progress-bar { background: linear-gradient(90deg, #00FF00, #00cc00); transition: width 1s cubic-bezier(0.4, 0, 0.2, 1); }
        .status-dot { width:8px; height:8px; border-radius:50%; display:inline-block; }
        .status-connected { background:#00FF00; box-shadow:0 0 8px #00FF0088; }
        .status-expired { background:#ef4444; box-shadow:0 0 8px #ef444488; }
        .status-configured { background:#f59e0b; box-shadow:0 0 8px #f59e0b88; }
        .status-planned { background:#6366f1; box-shadow:0 0 8px #6366f188; }
        .status-active { background:#00FF00; box-shadow:0 0 8px #00FF0088; }
        .tag { font-size: .65rem; padding: 2px 8px; border-radius: 9999px; font-weight: 600; text-transform: uppercase; letter-spacing: .5px; }
        .tag-high { background: #ef444433; color: #ef4444; }
        .tag-medium { background: #f59e0b33; color: #f59e0b; }
        .tag-low { background: #3b82f633; color: #3b82f6; }
        .tag-done { background: #00FF0022; color: #00FF00; }
        .tag-review { background: #a855f733; color: #a855f7; }
        .tag-draft { background: #6b728033; color: #9ca3af; }
        .tag-new { background: #00FF0033; color: #00FF00; }
        .tag-active { background: #3b82f633; color: #60a5fa; }
        .tag-tool { background: #6366f133; color: #818cf8; }
        .tag-planning { background: #f59e0b33; color: #fbbf24; }
        .tag-completed { background: #00FF0022; color: #00FF00; }
        .tag-planned { background: #6366f133; color: #818cf8; }
        .btn-approve { background: #00FF0022; color: #00FF00; border: 1px solid #00FF00; padding: 6px 16px; border-radius: 6px; font-size: 11px; font-weight: 600; transition: all .2s; }
        .btn-approve:hover { background: #00FF00; color: #0a0a0a; }
        .btn-reject { background: #ef444422; color: #ef4444; border: 1px solid #ef4444; padding: 6px 16px; border-radius: 6px; font-size: 11px; font-weight: 600; transition: all .2s; }
        .btn-reject:hover { background: #ef4444; color: white; }
        .notification-item { border-left: 2px solid #00FF00; padding-left: 12px; transition: all .2s; }
        .notification-item:hover { border-left-width: 4px; background: rgba(0, 255, 0, 0.03); }
        .calendar-event { border-left: 3px solid; transition: all .3s; }
        .calendar-event:hover { transform: translateX(4px); }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #00FF00; }
        .search-input { background: #111; border: 1px solid #222; color: white; padding: 8px 12px; border-radius: 6px; width: 100%; transition: all .2s; }
        .search-input:focus { outline: none; border-color: #00FF00; box-shadow: 0 0 0 3px rgba(0, 255, 0, 0.1); }
        .chart-container { position: relative; height: 300px; }
    </style>
</head>
<body class="min-h-screen text-white">

    <!-- Top Bar with Branding -->
    <header class="border-b border-brand-border px-4 md:px-6 py-4 flex items-center justify-between sticky top-0 bg-brand-dark/98 backdrop-blur-lg z-50 shadow-lg">
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 bg-brand rounded-lg flex items-center justify-center text-black font-bold text-base shadow-lg">PG</div>
            <div>
                <h1 class="text-base font-bold text-white tracking-tight">Pulse Graphix</h1>
                <p class="text-[11px] text-brand-muted">3 Rue Jacques Pr√©vert, 77200 Torcy ‚Ä¢ Executive Dashboard</p>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <div id="live-indicator" class="flex items-center gap-2 text-xs">
                <span class="status-dot status-connected pulse"></span>
                <span class="text-brand-muted"><span id="agent-status-text" class="text-brand font-semibold">ACTIVE</span></span>
            </div>
            <div class="text-[10px] text-brand-muted font-mono" id="last-update">--</div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar Nav -->
        <nav class="hidden md:flex flex-col w-52 border-r border-brand-border p-3 gap-1 sticky top-[73px] h-[calc(100vh-73px)] overflow-y-auto">
            <button onclick="showTab('overview')" class="nav-btn active text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="overview">üìä Overview</button>
            <button onclick="showTab('calendar')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="calendar">üìÖ Calendar</button>
            <button onclick="showTab('notifications')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="notifications">üîî Activity Feed <span id="notif-badge" class="ml-1 bg-brand text-black text-[9px] px-1.5 py-0.5 rounded-full font-bold">0</span></button>
            <button onclick="showTab('tasks')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="tasks">‚úÖ Tasks</button>
            <button onclick="showTab('projects')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="projects">üöÄ Projects</button>
            <button onclick="showTab('approvals')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="approvals">‚ö° Approvals <span id="approval-badge" class="ml-1 bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded-full font-bold">0</span></button>
            <button onclick="showTab('documents')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="documents">üìÅ Documents</button>
            <button onclick="showTab('prospects')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="prospects">üéØ Prospects</button>
            <button onclick="showTab('people')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="people">üë• People</button>
            <button onclick="showTab('memory')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="memory">üß† Memory</button>
            <button onclick="showTab('integrations')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="integrations">üîå Integrations</button>
            <button onclick="showTab('models')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="models">ü§ñ AI Models</button>
            <button onclick="showTab('skills')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="skills">‚öôÔ∏è Skills</button>
            <button onclick="showTab('goals')" class="nav-btn text-left px-3 py-2.5 rounded-lg text-xs font-semibold text-brand-muted border border-transparent" data-tab="goals">üéØ Goals</button>
        </nav>

        <!-- Mobile Nav -->
        <div class="md:hidden flex overflow-x-auto border-b border-brand-border px-2 py-2 gap-1 sticky top-[73px] bg-brand-dark z-40 w-full" id="mobile-nav">
            <button onclick="showTab('overview')" class="nav-btn active whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="overview">üìä</button>
            <button onclick="showTab('calendar')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="calendar">üìÖ</button>
            <button onclick="showTab('notifications')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="notifications">üîî</button>
            <button onclick="showTab('tasks')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="tasks">‚úÖ</button>
            <button onclick="showTab('projects')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="projects">üöÄ</button>
            <button onclick="showTab('approvals')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="approvals">‚ö°</button>
            <button onclick="showTab('documents')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="documents">üìÅ</button>
            <button onclick="showTab('prospects')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="prospects">üéØ</button>
            <button onclick="showTab('people')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="people">üë•</button>
            <button onclick="showTab('memory')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="memory">üß†</button>
            <button onclick="showTab('integrations')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="integrations">üîå</button>
            <button onclick="showTab('models')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="models">ü§ñ</button>
            <button onclick="showTab('skills')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="skills">‚öôÔ∏è</button>
            <button onclick="showTab('goals')" class="nav-btn whitespace-nowrap px-3 py-1.5 rounded-full text-[10px] font-medium text-brand-muted border border-brand-border" data-tab="goals">üéØ</button>
        </div>

        <!-- Main Content -->
        <main class="flex-1 p-4 md:p-6 max-w-7xl">

            <!-- OVERVIEW TAB -->
            <div id="tab-overview" class="tab-content active fade-in">
                <h2 class="text-xl font-bold mb-6">Overview</h2>

                <!-- Stats Row -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="glass rounded-xl p-5">
                        <div class="text-brand-muted text-[10px] uppercase tracking-wider mb-2 font-semibold">Current Task</div>
                        <div id="current-task" class="text-xs font-medium text-white">Loading...</div>
                    </div>
                    <div class="glass rounded-xl p-5">
                        <div class="text-brand-muted text-[10px] uppercase tracking-wider mb-2 font-semibold">Completed</div>
                        <div id="stat-completed" class="text-3xl font-bold text-brand">--</div>
                    </div>
                    <div class="glass rounded-xl p-5">
                        <div class="text-brand-muted text-[10px] uppercase tracking-wider mb-2 font-semibold">Pending</div>
                        <div id="stat-pending" class="text-3xl font-bold text-yellow-400">--</div>
                    </div>
                    <div class="glass rounded-xl p-5">
                        <div class="text-brand-muted text-[10px] uppercase tracking-wider mb-2 font-semibold">Approvals</div>
                        <div id="stat-approvals" class="text-3xl font-bold text-red-400">--</div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="glass rounded-xl p-5">
                        <h3 class="text-sm font-bold text-white mb-4">Project Progress</h3>
                        <div class="chart-container">
                            <canvas id="projectChart"></canvas>
                        </div>
                    </div>
                    <div class="glass rounded-xl p-5">
                        <h3 class="text-sm font-bold text-white mb-4">Task Distribution</h3>
                        <div class="chart-container">
                            <canvas id="taskChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Actions + Pending -->
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="glass rounded-xl p-5">
                        <h3 class="text-xs font-bold text-brand-muted uppercase tracking-wider mb-4">Recent Actions</h3>
                        <div id="recent-actions" class="space-y-3"></div>
                    </div>
                    <div class="glass rounded-xl p-5">
                        <h3 class="text-xs font-bold text-brand-muted uppercase tracking-wider mb-4">Pending Tasks</h3>
                        <div id="pending-tasks" class="space-y-3"></div>
                    </div>
                </div>

                <!-- Quick Access -->
                <div class="glass rounded-xl p-5">
                    <h3 class="text-xs font-bold text-brand-muted uppercase tracking-wider mb-4">Quick Links</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <a href="https://github.com/ALEXPRIME000/alex-dashboard" target="_blank" class="glass rounded-lg p-4 text-center hover:border-brand transition text-xs font-medium">üêô GitHub</a>
                        <a href="https://n8n.nexusaiacademy.app" target="_blank" class="glass rounded-lg p-4 text-center hover:border-brand transition text-xs font-medium">‚ö° n8n</a>
                        <a href="#" onclick="showTab('approvals')" class="glass rounded-lg p-4 text-center hover:border-brand transition text-xs font-medium">‚ö° Approvals</a>
                        <a href="#" onclick="showTab('documents')" class="glass rounded-lg p-4 text-center hover:border-brand transition text-xs font-medium">üìÅ Files</a>
                    </div>
                </div>
            </div>

            <!-- CALENDAR TAB -->
            <div id="tab-calendar" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-2">Calendar</h2>
                <p class="text-brand-muted text-sm mb-6">Upcoming events and deadlines (Google OAuth integration pending)</p>
                <div id="calendar-content" class="space-y-4"></div>
            </div>

            <!-- NOTIFICATIONS TAB -->
            <div id="tab-notifications" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-2">Activity Feed</h2>
                <p class="text-brand-muted text-sm mb-6">Recent commits, updates, and system activity</p>
                <div id="notifications-content" class="space-y-3"></div>
            </div>

            <!-- TASKS TAB -->
            <div id="tab-tasks" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Tasks</h2>
                <div id="tasks-content" class="space-y-4"></div>
            </div>

            <!-- PROJECTS TAB -->
            <div id="tab-projects" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Projects</h2>
                <div id="projects-content" class="space-y-5"></div>
            </div>

            <!-- APPROVALS TAB -->
            <div id="tab-approvals" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-2">Approvals</h2>
                <p class="text-brand-muted text-sm mb-6">Items waiting for your review and approval</p>
                <div id="approvals-content" class="space-y-4"></div>
            </div>

            <!-- DOCUMENTS TAB -->
            <div id="tab-documents" class="tab-content fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold">Documents</h2>
                    <input type="text" id="doc-search" placeholder="üîç Search documents..." class="search-input w-64" oninput="filterDocuments()">
                </div>
                <div id="documents-content"></div>
            </div>

            <!-- PROSPECTS TAB -->
            <div id="tab-prospects" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Prospects & Leads</h2>
                <div id="prospects-content" class="space-y-4"></div>
            </div>

            <!-- PEOPLE TAB -->
            <div id="tab-people" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">People & Team</h2>
                <div id="people-content"></div>
            </div>

            <!-- MEMORY TAB -->
            <div id="tab-memory" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Memory Log</h2>
                <div id="memory-content" class="space-y-3"></div>
            </div>

            <!-- INTEGRATIONS TAB -->
            <div id="tab-integrations" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Integrations & Services</h2>
                <div id="integrations-content" class="space-y-4"></div>
            </div>

            <!-- MODELS TAB -->
            <div id="tab-models" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">AI Models & Usage</h2>
                <div id="models-content" class="space-y-4"></div>
            </div>

            <!-- SKILLS TAB -->
            <div id="tab-skills" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Installed Skills</h2>
                <div id="skills-content" class="grid md:grid-cols-2 gap-4"></div>
            </div>

            <!-- GOALS TAB -->
            <div id="tab-goals" class="tab-content fade-in">
                <h2 class="text-xl font-bold mb-6">Goals & Targets</h2>
                <div id="goals-content"></div>
            </div>

        </main>
    </div>

    <script>
    // Fetch from same origin (Vercel) ‚Äî no GitHub CDN cache delay
    const GITHUB_RAW = '.';
    let statusData = null;
    let fullData = null;
    let projectChart = null;
    let taskChart = null;
    let allDocuments = [];

    function showTab(tab) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById('tab-' + tab).classList.add('active');
        document.querySelectorAll(`[data-tab="${tab}"]`).forEach(el => el.classList.add('active'));
    }

    function timeAgo(dateStr) {
        const diff = Date.now() - new Date(dateStr).getTime();
        const mins = Math.floor(diff / 60000);
        if (mins < 1) return 'just now';
        if (mins < 60) return mins + 'm ago';
        const hrs = Math.floor(mins / 60);
        if (hrs < 24) return hrs + 'h ago';
        return Math.floor(hrs / 24) + 'd ago';
    }

    function tag(text, type) {
        return `<span class="tag tag-${type}">${text}</span>`;
    }

    function githubLink(path) {
        return `https://github.com/ALEXPRIME000/alex-dashboard/blob/master/${path}`;
    }

    function handleApproval(item, action) {
        alert(`${action === 'approve' ? '‚úÖ Approved' : '‚ùå Rejected'}: ${item}\n\nThis is a visual demo. Connect to backend for real actions.`);
    }

    function filterDocuments() {
        const query = document.getElementById('doc-search').value.toLowerCase();
        const allCategories = document.querySelectorAll('.doc-category');
        allCategories.forEach(cat => {
            const items = cat.querySelectorAll('.doc-item');
            let visibleCount = 0;
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(query)) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            });
            cat.style.display = visibleCount > 0 ? 'block' : 'none';
        });
    }

    async function loadData() {
        try {
            const [statusRes, dataRes] = await Promise.all([
                fetch(GITHUB_RAW + '/status.json?t=' + Date.now()),
                fetch(GITHUB_RAW + '/data.json?t=' + Date.now()).catch(() => null)
            ]);
            statusData = await statusRes.json();
            if (dataRes && dataRes.ok) fullData = await dataRes.json();
        } catch (e) {
            console.error('Failed to load data:', e);
        }
        render();
    }

    function renderCharts() {
        if (!fullData || !fullData.projects) return;

        // Project Progress Chart
        const projectNames = fullData.projects.map(p => p.name);
        const projectProgress = fullData.projects.map(p => p.progress);
        
        const projectCtx = document.getElementById('projectChart').getContext('2d');
        if (projectChart) projectChart.destroy();
        projectChart = new Chart(projectCtx, {
            type: 'bar',
            data: {
                labels: projectNames,
                datasets: [{
                    label: 'Progress %',
                    data: projectProgress,
                    backgroundColor: 'rgba(0, 255, 0, 0.2)',
                    borderColor: '#00FF00',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: '#222' },
                        ticks: { color: '#888' }
                    },
                    x: {
                        grid: { color: '#222' },
                        ticks: { color: '#888', font: { size: 10 } }
                    }
                }
            }
        });

        // Task Distribution Chart
        const taskCtx = document.getElementById('taskChart').getContext('2d');
        if (taskChart) taskChart.destroy();
        taskChart = new Chart(taskCtx, {
            type: 'doughnut',
            data: {
                labels: ['Completed', 'Pending', 'Approvals'],
                datasets: [{
                    data: [
                        statusData.stats?.tasksCompleted || 0,
                        statusData.stats?.tasksPending || 0,
                        fullData.approvals?.length || 0
                    ],
                    backgroundColor: ['#00FF00', '#f59e0b', '#ef4444'],
                    borderColor: '#0a0a0a',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#888', padding: 15 }
                    }
                }
            }
        });
    }

    function render() {
        if (!statusData) return;

        // Header
        document.getElementById('last-update').textContent = timeAgo(statusData.lastUpdate);
        document.getElementById('agent-status-text').textContent = statusData.status?.toUpperCase() || 'ACTIVE';
        document.getElementById('current-task').textContent = statusData.currentTask || 'Idle';

        // Stats
        document.getElementById('stat-completed').textContent = statusData.stats?.tasksCompleted || 0;
        document.getElementById('stat-pending').textContent = statusData.stats?.tasksPending || 0;

        // Recent Actions
        const ra = document.getElementById('recent-actions');
        ra.innerHTML = (statusData.recentActions || []).map(a =>
            `<div class="flex items-start gap-3 text-xs slide-in"><span class="text-brand mt-0.5 text-sm">‚ñ∏</span><span class="text-gray-300">${a}</span></div>`
        ).join('');

        // Pending Tasks
        const pt = document.getElementById('pending-tasks');
        pt.innerHTML = (statusData.pendingTasks || []).map(t =>
            `<div class="flex items-start justify-between gap-3 text-xs slide-in">
                <span class="text-gray-300">${t.name}</span>
                ${tag(t.priority, t.priority)}
            </div>`
        ).join('');

        if (!fullData) return;

        // Render Charts
        renderCharts();

        // Calendar
        const calContent = document.getElementById('calendar-content');
        const events = fullData.calendar || [];
        if (events.length === 0) {
            calContent.innerHTML = '<div class="glass rounded-xl p-8 text-center text-brand-muted">No upcoming events. Google OAuth integration pending.</div>';
        } else {
            calContent.innerHTML = events.map(e =>
                `<div class="glass rounded-xl p-5 calendar-event" style="border-left-color: ${e.color || '#00FF00'}">
                    <div class="flex items-start justify-between mb-2">
                        <h3 class="text-sm font-bold text-white">${e.title}</h3>
                        <span class="text-[10px] text-brand-muted font-mono">${e.date}</span>
                    </div>
                    <p class="text-xs text-brand-muted">${e.description || 'No description'}</p>
                    ${e.time ? `<div class="text-xs text-brand mt-2">üïê ${e.time}</div>` : ''}
                </div>`
            ).join('');
        }

        // Notifications
        const notifContent = document.getElementById('notifications-content');
        const notifications = fullData.notifications || [];
        document.getElementById('notif-badge').textContent = notifications.length;
        if (notifications.length === 0) {
            notifContent.innerHTML = '<div class="glass rounded-xl p-8 text-center text-brand-muted">No recent activity</div>';
        } else {
            notifContent.innerHTML = notifications.map(n =>
                `<div class="glass rounded-xl p-4 notification-item">
                    <div class="flex items-start gap-3">
                        <span class="text-xl">${n.icon || 'üìå'}</span>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-white">${n.title}</div>
                            <div class="text-xs text-brand-muted mt-1">${n.description}</div>
                            <div class="text-[10px] text-brand-muted mt-2">${n.time}</div>
                        </div>
                    </div>
                </div>`
            ).join('');
        }

        // Approvals
        const appCount = fullData.approvals?.length || 0;
        document.getElementById('stat-approvals').textContent = appCount;
        document.getElementById('approval-badge').textContent = appCount;
        const ac = document.getElementById('approvals-content');
        ac.innerHTML = (fullData.approvals || []).map(a =>
            `<div class="glass rounded-xl p-5">
                <div class="flex items-start justify-between mb-3">
                    <div class="flex-1">
                        <div class="text-sm font-bold text-white mb-1">${a.item}</div>
                        <div class="text-[10px] text-brand-muted">${a.file ? `<a href="${githubLink(a.file)}" target="_blank" class="text-blue-400 hover:underline">${a.file}</a>` : 'No file'} ‚Ä¢ ${a.created}</div>
                    </div>
                    ${tag(a.priority, a.priority)}
                </div>
                <div class="flex gap-2">
                    <button onclick="handleApproval('${a.item.replace(/'/g, "\\'")}', 'approve')" class="btn-approve">‚úì Approve</button>
                    <button onclick="handleApproval('${a.item.replace(/'/g, "\\'")}', 'reject')" class="btn-reject">‚úó Reject</button>
                </div>
            </div>`
        ).join('');

        // Projects
        const pc = document.getElementById('projects-content');
        pc.innerHTML = (fullData.projects || []).map(p =>
            `<div class="glass rounded-xl p-5">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-base font-bold text-white">${p.name}</h3>
                    ${tag(p.status, p.status)}
                </div>
                <p class="text-sm text-brand-muted mb-4">${p.description}</p>
                <div class="w-full bg-brand-border rounded-full h-2 mb-2">
                    <div class="progress-bar h-2 rounded-full" style="width:${p.progress}%"></div>
                </div>
                <div class="flex justify-between text-xs text-brand-muted mb-3">
                    <span>${p.progress}% complete</span>
                    ${p.revenue ? `<span class="text-brand font-semibold">${p.revenue}</span>` : ''}
                </div>
                ${p.nextStep ? `<div class="text-xs text-yellow-400 mb-3">‚è≠Ô∏è Next: ${p.nextStep}</div>` : ''}
                ${p.files ? `<div class="flex flex-wrap gap-2">${p.files.map(f => `<a href="${githubLink(f)}" target="_blank" class="text-[10px] text-blue-400 bg-blue-400/10 px-3 py-1 rounded-full hover:underline transition">${f.split('/').pop()}</a>`).join('')}</div>` : ''}
            </div>`
        ).join('');

        // Documents
        const dc = document.getElementById('documents-content');
        const docCategories = fullData.documents || {};
        allDocuments = [];
        dc.innerHTML = Object.entries(docCategories).map(([cat, docs]) => {
            allDocuments.push(...docs);
            return `<div class="mb-6 doc-category">
                <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">${cat.charAt(0).toUpperCase() + cat.slice(1)} <span class="text-brand-muted font-normal">(${docs.length})</span></h3>
                <div class="space-y-3">
                    ${docs.map(d => `<div class="glass rounded-lg px-5 py-4 flex items-center justify-between doc-item">
                        <div class="flex items-center gap-4">
                            <span class="text-xl">${cat === 'scripts' ? '‚öôÔ∏è' : cat === 'templates' ? 'üìÑ' : cat === 'marketing' ? 'üì£' : cat === 'prospects' ? 'üéØ' : cat === 'reports' ? 'üìä' : cat === 'trackers' ? 'üìà' : 'üìù'}</span>
                            <div>
                                <a href="${githubLink(d.path)}" target="_blank" class="text-sm font-medium hover:text-brand transition">${d.name}</a>
                                <div class="text-[10px] text-brand-muted mt-0.5">${d.path}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            ${d.date ? `<span class="text-[10px] text-brand-muted font-mono">${d.date}</span>` : ''}
                            ${d.status ? tag(d.status, d.status) : ''}
                            ${d.priority ? tag(d.priority, d.priority) : ''}
                        </div>
                    </div>`).join('')}
                </div>
            </div>`;
        }).join('');

        // Tasks
        const tc = document.getElementById('tasks-content');
        const pendingTasks = fullData.tasks?.pending || [];
        const blockedTasks = fullData.tasks?.blocked || [];
        const completedTasks = fullData.tasks?.completed || [];
        tc.innerHTML = `
            ${blockedTasks.length ? `<div class="glass rounded-xl p-5 mb-5 border-l-4 border-red-500">
                <h3 class="text-sm font-bold text-red-400 uppercase tracking-wider mb-4">üö´ Blocked ‚Äî Needs Your Action (${blockedTasks.length})</h3>
                ${blockedTasks.map(t => `<div class="flex items-start justify-between py-3 border-b border-brand-border last:border-0">
                    <div><span class="text-sm text-white">${t.name}</span><div class="text-xs text-red-300 mt-1">‚è≥ ${t.need}</div></div>
                    ${tag(t.priority.replace(/[üî¥üü°üü¢]/g,'').trim(), t.priority.includes('HIGH') ? 'high' : t.priority.includes('MEDIUM') ? 'medium' : 'low')}
                </div>`).join('')}
            </div>` : ''}
            <div class="glass rounded-xl p-5 mb-5">
                <h3 class="text-sm font-bold text-yellow-400 uppercase tracking-wider mb-4">‚è≥ To Do (${pendingTasks.length})</h3>
                ${pendingTasks.map(t => `<div class="flex items-center justify-between py-3 border-b border-brand-border last:border-0">
                    <span class="text-sm">${t.name}</span>${tag(t.priority, t.priority)}
                </div>`).join('')}
            </div>
            <div class="glass rounded-xl p-5">
                <h3 class="text-sm font-bold text-brand uppercase tracking-wider mb-4">‚úÖ Completed (${completedTasks.length})</h3>
                ${completedTasks.map(t => `<div class="flex items-center justify-between py-3 border-b border-brand-border last:border-0">
                    <span class="text-sm text-gray-400">${t.name}</span>
                    <span class="text-[10px] text-brand-muted font-mono">${t.date}</span>
                </div>`).join('')}
            </div>`;

        // Prospects
        const prosc = document.getElementById('prospects-content');
        const leads = fullData.prospectLeads || [];
        const tierColors = { hot: '#ef4444', warm: '#f59e0b', new: '#3b82f6', cold: '#6b7280' };
        const tierLabels = { hot: 'üî• HOT', warm: 'üü° WARM', new: 'üîµ NEW', cold: '‚ö™ COLD' };
        const tierGroups = {};
        leads.forEach(l => { if (!tierGroups[l.tier]) tierGroups[l.tier] = []; tierGroups[l.tier].push(l); });
        
        prosc.innerHTML = `
            <div class="glass rounded-xl p-5 mb-5">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center"><div class="text-2xl font-bold text-brand">${leads.length}</div><div class="text-[10px] text-brand-muted">Total Leads</div></div>
                    <div class="text-center"><div class="text-2xl font-bold text-red-400">${(tierGroups.hot||[]).length}</div><div class="text-[10px] text-brand-muted">Hot Leads</div></div>
                    <div class="text-center"><div class="text-2xl font-bold text-yellow-400">${(tierGroups.warm||[]).length}</div><div class="text-[10px] text-brand-muted">Warm Leads</div></div>
                    <div class="text-center"><div class="text-2xl font-bold text-blue-400">${(tierGroups.new||[]).length + (tierGroups.cold||[]).length}</div><div class="text-[10px] text-brand-muted">New/Cold</div></div>
                </div>
            </div>
            ${Object.entries(tierGroups).map(([tier, items]) => `
                <div class="glass rounded-xl p-5 mb-4" style="border-left: 3px solid ${tierColors[tier]}">
                    <h3 class="text-sm font-bold mb-4" style="color: ${tierColors[tier]}">${tierLabels[tier] || tier} (${items.length})</h3>
                    <div class="space-y-3">
                        ${items.map(l => `<div class="flex items-start justify-between py-2 border-b border-brand-border last:border-0">
                            <div class="flex-1">
                                <div class="text-sm font-semibold text-white">${l.id}. ${l.name}</div>
                                <div class="text-xs text-brand-muted mt-1">${l.type} ‚Ä¢ ${l.address}</div>
                                <div class="text-xs mt-1">${l.phone !== 'Via Pages Jaunes' && l.phone !== 'Via Planity' && l.phone !== 'Via Mappy' && l.phone !== 'Via OpenStreetMap' ? `üìû <span class="text-brand font-mono">${l.phone}</span>` : `<span class="text-brand-muted">${l.phone}</span>`}</div>
                            </div>
                            <div class="text-right">
                                <div class="text-[10px] ${l.webStatus.includes('NO') ? 'text-red-400' : 'text-yellow-400'}">${l.webStatus.includes('NO') ? '‚ùå No Site' : '‚ö†Ô∏è Verify'}</div>
                            </div>
                        </div>`).join('')}
                    </div>
                </div>
            `).join('')}
            <div class="glass rounded-xl p-5 mt-3">
                <h3 class="text-xs font-bold text-brand-muted uppercase tracking-wider mb-3">üìÅ Prospect Files</h3>
                ${(fullData.prospects || []).slice(0, 5).map(p => `<a href="${githubLink(p.path)}" target="_blank" class="block text-sm text-blue-400 hover:underline py-1.5">üìÑ ${p.name}</a>`).join('')}
            </div>`;

        // People
        const pplc = document.getElementById('people-content');
        const team = fullData.people?.team || [];
        const contacts = fullData.people?.contacts || [];
        pplc.innerHTML = `
            <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">Team (Agents)</h3>
            <div class="grid md:grid-cols-2 gap-4 mb-8">
                ${team.map(t => `<div class="glass rounded-xl p-5 flex items-center gap-4">
                    <div class="text-3xl">${t.emoji}</div>
                    <div class="flex-1">
                        <div class="text-sm font-bold text-white">${t.name}</div>
                        <div class="text-xs text-brand-muted mt-0.5">${t.role}</div>
                    </div>
                    <div><span class="status-dot status-${t.status}"></span></div>
                </div>`).join('')}
            </div>
            <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">Contacts</h3>
            <div class="space-y-3">
                ${contacts.map(c => `<div class="glass rounded-lg px-5 py-4 flex items-center justify-between">
                    <div>
                        <div class="text-sm font-medium text-white">${c.name}</div>
                        <div class="text-xs text-brand-muted mt-0.5">${c.role}</div>
                    </div>
                    <div class="text-right">
                        ${c.email ? `<div class="text-xs text-blue-400">${c.email}</div>` : ''}
                        ${c.phone ? `<div class="text-xs text-brand-muted font-mono mt-0.5">${c.phone}</div>` : ''}
                    </div>
                </div>`).join('')}
            </div>`;

        // Memory
        const mc = document.getElementById('memory-content');
        const memFiles = fullData.memory?.files || [];
        const coreFiles = fullData.memory?.coreFiles || [];
        mc.innerHTML = `
            <div class="glass rounded-xl p-5 mb-5">
                <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">Core Memory</h3>
                ${coreFiles.map(f => `<a href="${githubLink(f)}" target="_blank" class="block text-sm text-blue-400 hover:underline py-2">üß† ${f}</a>`).join('')}
            </div>
            <div class="glass rounded-xl p-5">
                <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">Daily Logs (${memFiles.length} entries)</h3>
                ${[...memFiles].reverse().map(f => `<a href="${githubLink(f)}" target="_blank" class="block text-sm text-gray-400 hover:text-brand transition py-2">üìù ${f.replace('memory/', '')}</a>`).join('')}
            </div>`;

        // Integrations
        const ic = document.getElementById('integrations-content');
        const services = fullData.integrations?.services || [];
        ic.innerHTML = services.map(s =>
            `<div class="glass rounded-xl p-5 flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <span class="status-dot status-${s.status}"></span>
                    <div>
                        <div class="text-sm font-medium text-white">${s.name}</div>
                        <div class="text-xs text-brand-muted mt-0.5">${s.notes || ''}</div>
                    </div>
                </div>
                <div class="text-right">
                    ${tag(s.status, s.status === 'connected' ? 'active' : s.status === 'expired' ? 'high' : 'planning')}
                    ${s.url ? `<div class="mt-2"><a href="${s.url}" target="_blank" class="text-xs text-blue-400 hover:underline font-medium">Open ‚Üí</a></div>` : ''}
                </div>
            </div>`
        ).join('');

        // Models
        const mc2 = document.getElementById('models-content');
        const models = fullData.integrations?.models || [];
        mc2.innerHTML = models.map(m =>
            `<div class="glass rounded-xl p-5 flex items-center justify-between">
                <div>
                    <div class="text-sm font-medium text-white">${m.model}</div>
                    <div class="text-xs text-brand-muted mt-0.5">${m.provider} ‚Ä¢ ${m.role}</div>
                </div>
                <div class="text-right">
                    <div class="text-xs text-brand-muted mb-2">${m.plan}</div>
                    ${tag(m.status, m.status === 'active' ? 'active' : 'medium')}
                </div>
            </div>`
        ).join('');

        // Skills
        const sc = document.getElementById('skills-content');
        const skills = fullData.skills || [];
        sc.innerHTML = skills.map(s =>
            `<div class="glass rounded-lg p-4">
                <div class="text-sm font-bold text-brand">${s.name}</div>
                <div class="text-xs text-brand-muted mt-2">${s.description}</div>
            </div>`
        ).join('');

        // Goals
        const gc = document.getElementById('goals-content');
        const lifeGoals = fullData.goals?.life || [];
        const bizGoals = fullData.goals?.business || [];
        gc.innerHTML = `
            <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">üè† Life Goals</h3>
            <div class="space-y-4 mb-8">
                ${lifeGoals.map(g => `<div class="glass rounded-xl p-5">
                    <div class="flex justify-between mb-3">
                        <span class="text-sm font-medium text-white">${g.goal}</span>
                        <span class="text-sm text-brand font-semibold">${g.target}</span>
                    </div>
                    <div class="w-full bg-brand-border rounded-full h-2">
                        <div class="progress-bar h-2 rounded-full" style="width:${g.progress}%"></div>
                    </div>
                    <div class="text-xs text-brand-muted mt-2">${g.progress}% progress</div>
                </div>`).join('')}
            </div>
            <h3 class="text-sm font-bold text-brand-muted uppercase tracking-wider mb-4">üíº Business Goals</h3>
            <div class="space-y-4">
                ${bizGoals.map(g => `<div class="glass rounded-xl p-5">
                    <div class="flex justify-between mb-3">
                        <span class="text-sm font-medium text-white">${g.goal}</span>
                        <span class="text-sm text-brand-muted">${g.target}</span>
                    </div>
                    <div class="w-full bg-brand-border rounded-full h-2">
                        <div class="progress-bar h-2 rounded-full" style="width:${g.progress}%"></div>
                    </div>
                    <div class="text-xs text-brand-muted mt-2">${g.progress}% progress</div>
                </div>`).join('')}
            </div>`;
    }

    // Initial load
    loadData();
    // Auto-refresh every 30s
    setInterval(loadData, 30000);
    </script>
</body>
</html>
