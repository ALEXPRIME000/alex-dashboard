<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alex Prime ‚Äî Executive Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        brand: { orange: '#FF6B35', gold: '#F7931A', dark: '#212121', darker: '#1a1a1a', card: '#2a2a2a', cardHover: '#333333', border: '#3a3a3a', muted: '#888888' },
      },
      fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
    }
  }
}
</script>
<style>
  body { font-family: 'Inter', system-ui, sans-serif; background: #121212; }
  .tab-btn.active { color: #FF6B35; border-bottom: 2px solid #FF6B35; }
  .tab-btn:not(.active) { color: #888; border-bottom: 2px solid transparent; }
  .tab-btn:hover:not(.active) { color: #ccc; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  .gradient-text { background: linear-gradient(135deg, #FF6B35, #F7931A); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .hero-glow { background: radial-gradient(ellipse at 50% 0%, rgba(255,107,53,0.12) 0%, transparent 70%); }
  .card { background: #1e1e1e; border: 1px solid #2a2a2a; border-radius: 12px; transition: border-color 0.2s; }
  .card:hover { border-color: #3a3a3a; }
  .progress-bar { background: #2a2a2a; border-radius: 999px; overflow: hidden; }
  .progress-fill { background: linear-gradient(90deg, #FF6B35, #F7931A); border-radius: 999px; height: 100%; transition: width 0.6s ease; }
  .tier-hot { background: rgba(255,107,53,0.15); color: #FF6B35; }
  .tier-warm { background: rgba(247,147,26,0.15); color: #F7931A; }
  .tier-new { background: rgba(59,130,246,0.15); color: #60a5fa; }
  .tier-cold { background: rgba(107,114,128,0.15); color: #9ca3af; }
  .status-connected { color: #22c55e; }
  .status-expired { color: #ef4444; }
  .status-available { color: #F7931A; }
  .status-active { color: #22c55e; }
  .stat-card { background: linear-gradient(135deg, #1e1e1e 0%, #252525 100%); }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: #1a1a1a; }
  ::-webkit-scrollbar-thumb { background: #3a3a3a; border-radius: 3px; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
  .fade-in { animation: fadeIn 0.4s ease forwards; }
  .priority-high { border-left: 3px solid #ef4444; }
  .priority-medium { border-left: 3px solid #F7931A; }
  .gallery-filter-btn { background: #2a2a2a; color: #888; }
  .gallery-filter-btn:hover { background: #333; color: #fff; }
  .gallery-filter-btn.active { background: linear-gradient(135deg, #FF6B35, #F7931A); color: #fff; }
  .gallery-card { background: #1e1e1e; border: 1px solid #2a2a2a; border-radius: 12px; overflow: hidden; transition: all 0.3s ease; cursor: pointer; }
  .gallery-card:hover { border-color: #FF6B35; transform: translateY(-4px); box-shadow: 0 12px 24px rgba(255,107,53,0.2); }
  .gallery-card img { width: 100%; height: 200px; object-fit: cover; transition: transform 0.3s ease; }
  .gallery-card:hover img { transform: scale(1.05); }
  #lightbox { transition: opacity 0.3s ease; }
  #lightbox.show { display: flex !important; animation: fadeIn 0.3s ease; }
  /* File Explorer Styles */
  .fe-folder { cursor: pointer; user-select: none; }
  .fe-folder:hover { background: rgba(255,107,53,0.08); }
  .fe-folder-header { display: flex; align-items: center; gap: 6px; padding: 6px 8px; border-radius: 8px; transition: all 0.15s ease; }
  .fe-folder-header:hover { background: rgba(255,107,53,0.12); }
  .fe-folder-children { overflow: hidden; transition: max-height 0.3s ease, opacity 0.25s ease; max-height: 0; opacity: 0; padding-left: 16px; }
  .fe-folder-children.open { max-height: 5000px; opacity: 1; }
  .fe-chevron { transition: transform 0.25s ease; display: inline-block; font-size: 10px; color: #666; width: 14px; text-align: center; }
  .fe-chevron.open { transform: rotate(90deg); }
  .fe-file { display: flex; align-items: center; gap: 6px; padding: 5px 8px; border-radius: 6px; cursor: pointer; transition: all 0.15s ease; color: #aaa; }
  .fe-file:hover { background: rgba(255,107,53,0.1); color: #fff; }
  .fe-file.active { background: rgba(255,107,53,0.18); color: #FF6B35; border-left: 2px solid #FF6B35; }
  .fe-file-icon { font-size: 14px; flex-shrink: 0; }
  .fe-file-name { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; }
  .fe-file-size { font-size: 10px; color: #666; flex-shrink: 0; }
  .fe-folder-count { font-size: 10px; background: #2a2a2a; color: #888; padding: 1px 6px; border-radius: 10px; }
  .fe-preview-md { color: #d4d4d4; line-height: 1.7; }
  .fe-preview-md h1 { font-size: 1.75rem; font-weight: 800; color: #fff; margin: 1.5rem 0 0.75rem; padding-bottom: 0.5rem; border-bottom: 1px solid #2a2a2a; }
  .fe-preview-md h2 { font-size: 1.35rem; font-weight: 700; color: #fff; margin: 1.25rem 0 0.5rem; }
  .fe-preview-md h3 { font-size: 1.1rem; font-weight: 600; color: #eee; margin: 1rem 0 0.4rem; }
  .fe-preview-md h4 { font-size: 0.95rem; font-weight: 600; color: #ddd; margin: 0.8rem 0 0.3rem; }
  .fe-preview-md p { margin: 0.5rem 0; }
  .fe-preview-md ul, .fe-preview-md ol { margin: 0.5rem 0; padding-left: 1.5rem; }
  .fe-preview-md li { margin: 0.25rem 0; }
  .fe-preview-md code { background: #2a2a2a; color: #FF6B35; padding: 2px 6px; border-radius: 4px; font-size: 0.85em; font-family: 'JetBrains Mono', monospace; }
  .fe-preview-md pre { background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 8px; padding: 1rem; margin: 0.75rem 0; overflow-x: auto; }
  .fe-preview-md pre code { background: none; padding: 0; color: #d4d4d4; }
  .fe-preview-md blockquote { border-left: 3px solid #FF6B35; padding-left: 1rem; margin: 0.75rem 0; color: #999; font-style: italic; }
  .fe-preview-md table { width: 100%; border-collapse: collapse; margin: 0.75rem 0; }
  .fe-preview-md th, .fe-preview-md td { border: 1px solid #2a2a2a; padding: 0.5rem 0.75rem; text-align: left; }
  .fe-preview-md th { background: #1e1e1e; color: #FF6B35; font-weight: 600; }
  .fe-preview-md a { color: #FF6B35; text-decoration: underline; }
  .fe-preview-md strong { color: #fff; }
  .fe-preview-md hr { border: none; border-top: 1px solid #2a2a2a; margin: 1rem 0; }
  .fe-code-preview { background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 8px; padding: 1rem; font-family: 'JetBrains Mono', 'Courier New', monospace; font-size: 0.85rem; color: #d4d4d4; white-space: pre-wrap; word-break: break-word; line-height: 1.6; overflow-x: auto; }
  .fe-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 12px; }
  .fe-grid-item { background: #1e1e1e; border: 1px solid #2a2a2a; border-radius: 10px; padding: 16px; text-align: center; cursor: pointer; transition: all 0.2s ease; }
  .fe-grid-item:hover { border-color: #FF6B35; transform: translateY(-2px); box-shadow: 0 8px 24px rgba(255,107,53,0.15); }
  .fe-grid-icon { font-size: 2rem; margin-bottom: 8px; }
  .fe-grid-name { font-size: 0.75rem; color: #ccc; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .fe-grid-size { font-size: 0.65rem; color: #666; margin-top: 4px; }
</style>
</head>
<body class="min-h-screen text-gray-200">
<!-- PASSWORD PROTECTION -->
<div id="password-overlay" style="position:fixed;inset:0;z-index:9999;background:#121212;display:flex;align-items:center;justify-content:center;">
 <div style="background:#1e1e1e;border:1px solid #2a2a2a;border-radius:12px;padding:2rem;max-width:400px;width:90%;text-align:center;">
 <div style="font-size:3rem;margin-bottom:1rem;">üîí</div>
 <h2 style="font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:0.5rem;">Alex Prime Dashboard</h2>
 <p style="color:#888;margin-bottom:1.5rem;">Enter password to access</p>
 <input id="password-input" type="password" placeholder="Password" style="width:100%;padding:0.75rem 1rem;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:8px;color:#fff;margin-bottom:1rem;outline:none;" onkeydown="if(event.key==='Enter')checkPassword()">
 <button onclick="checkPassword()" style="width:100%;padding:0.75rem 1rem;background:linear-gradient(135deg,#FF6B35,#F7931A);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:opacity 0.2s;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='1'">Access Dashboard</button>
 <p id="password-error" style="color:#ef4444;margin-top:1rem;font-size:0.875rem;display:none;">Incorrect password. Hint: starts with A, ends with #</p>
 </div>
</div>
<script>
function checkPassword() {
 const pass = document.getElementById('password-input').value;
 if (pass === 'Alex123#') {
 document.getElementById('password-overlay').style.display='none';
 localStorage.setItem('alexprime-auth','true');
 } else {
 document.getElementById('password-error').style.display='block';
 }
}
if (localStorage.getItem('alexprime-auth') === 'true') {
 document.getElementById('password-overlay').style.display='none';
}
</script>
<!-- END PASSWORD PROTECTION -->

<!-- HEADER -->
<header class="sticky top-0 z-50 backdrop-blur-xl bg-[#121212]/80 border-b border-[#2a2a2a]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-brand-orange to-brand-gold flex items-center justify-center text-white font-black text-lg">A</div>
      <div>
        <h1 class="text-lg font-bold text-white tracking-tight">Alex Prime</h1>
        <p class="text-xs text-gray-500">Executive Dashboard</p>
      </div>
    </div>
    <div class="flex items-center gap-4">
      <div id="last-updated" class="text-xs text-gray-500"></div>
      <div id="refresh-indicator" class="w-2 h-2 rounded-full bg-green-500" title="Auto-refresh active"></div>
    </div>
  </div>
  <!-- TABS -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6">
    <nav class="flex gap-1 overflow-x-auto pb-0 -mb-px" id="tab-nav">
      <button class="tab-btn active px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="overview">Overview</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="tasks">Tasks</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="projects">Projects</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="prospects">Prospects</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="calendar">Calendar</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="approvals">Approvals</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="people">People</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="memory">Memory</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="integrations">Integrations</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="services">Services</button>
      <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="gallery">Gallery</button>
 <button class="tab-btn px-3 py-2 text-sm font-medium whitespace-nowrap" data-tab="downloads">üìÅ Files</button>
    </nav>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 sm:px-6 py-6">

  <!-- OVERVIEW TAB -->
  <section id="tab-overview" class="tab-content active fade-in">
    <!-- Hero -->
    <div class="hero-glow rounded-2xl p-8 mb-8 border border-[#2a2a2a]">
      <h2 class="text-3xl sm:text-4xl font-black gradient-text mb-2">Alex Prime</h2>
      <p class="text-gray-400 text-lg mb-6">AI Executive Agent ‚Ä¢ Pulse Graphix Empire Command Center</p>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4" id="hero-stats"></div>
    </div>
    <!-- Quick Glance -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card p-6">
        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">‚ö° Blocked Items</h3>
        <div id="overview-blocked" class="space-y-3"></div>
      </div>
      <div class="card p-6">
        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">üéØ Business Goals</h3>
        <div id="overview-goals" class="space-y-3"></div>
      </div>
    </div>
  </section>

  <!-- TASKS TAB -->
  <section id="tab-tasks" class="tab-content fade-in">
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6" id="task-stats"></div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div class="card p-6">
        <h3 class="text-sm font-semibold text-green-400 uppercase tracking-wider mb-4">‚úÖ Completed (<span id="completed-count">0</span>)</h3>
        <div id="tasks-completed" class="space-y-2 max-h-[500px] overflow-y-auto pr-2"></div>
      </div>
      <div>
        <div class="card p-6 mb-6">
          <h3 class="text-sm font-semibold text-yellow-400 uppercase tracking-wider mb-4">‚è≥ Pending (<span id="pending-count">0</span>)</h3>
          <div id="tasks-pending" class="space-y-2 max-h-[300px] overflow-y-auto pr-2"></div>
        </div>
        <div class="card p-6">
          <h3 class="text-sm font-semibold text-red-400 uppercase tracking-wider mb-4">üö´ Blocked (<span id="blocked-count">0</span>)</h3>
          <div id="tasks-blocked" class="space-y-2"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- PROJECTS TAB -->
  <section id="tab-projects" class="tab-content fade-in">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="projects-grid"></div>
  </section>

  <!-- PROSPECTS TAB -->
  <section id="tab-prospects" class="tab-content fade-in">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h2 class="text-xl font-bold text-white">Prospect Pipeline</h2>
        <p class="text-sm text-gray-500">Torcy & Marne-la-Vall√©e (77200)</p>
      </div>
      <div class="flex gap-2" id="tier-filters">
        <button class="tier-filter text-xs px-3 py-1 rounded-full bg-[#2a2a2a] text-gray-300 hover:text-white" data-tier="all">All</button>
        <button class="tier-filter text-xs px-3 py-1 rounded-full tier-hot" data-tier="hot">üî• Hot</button>
        <button class="tier-filter text-xs px-3 py-1 rounded-full tier-warm" data-tier="warm">üü° Warm</button>
        <button class="tier-filter text-xs px-3 py-1 rounded-full tier-new" data-tier="new">üÜï New</button>
        <button class="tier-filter text-xs px-3 py-1 rounded-full tier-cold" data-tier="cold">‚ùÑÔ∏è Cold</button>
      </div>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="text-left text-gray-500 border-b border-[#2a2a2a]">
            <th class="pb-3 pr-4">#</th>
            <th class="pb-3 pr-4">Business</th>
            <th class="pb-3 pr-4">Type</th>
            <th class="pb-3 pr-4">Address</th>
            <th class="pb-3 pr-4">Phone</th>
            <th class="pb-3 pr-4">Web Status</th>
            <th class="pb-3">Tier</th>
          </tr>
        </thead>
        <tbody id="prospects-table"></tbody>
      </table>
    </div>
  </section>

  <!-- CALENDAR TAB -->
  <section id="tab-calendar" class="tab-content fade-in">
    <div class="card p-12 text-center">
      <div class="text-5xl mb-4">üìÖ</div>
      <h3 class="text-xl font-bold text-white mb-2">Calendar Coming Soon</h3>
      <p class="text-gray-500">Google Calendar integration pending OAuth re-authentication.</p>
      <p class="text-gray-600 text-sm mt-2">Connect via: Fix Google OAuth ‚Üí Approvals tab</p>
    </div>
  </section>

  <!-- APPROVALS TAB -->
  <section id="tab-approvals" class="tab-content fade-in">
    <div class="mb-6">
      <h2 class="text-xl font-bold text-white">‚è≥ Waiting on Kabundji</h2>
      <p class="text-sm text-gray-500">Items that need your review and approval</p>
    </div>
    <div class="space-y-4" id="approvals-list"></div>
  </section>

  <!-- PEOPLE TAB -->
  <section id="tab-people" class="tab-content fade-in">
    <div class="card p-12 text-center">
      <div class="text-5xl mb-4">üë•</div>
      <h3 class="text-xl font-bold text-white mb-2">People & Contacts</h3>
      <p class="text-gray-500">Team members, clients, and contacts directory.</p>
      <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-lg mx-auto text-left">
        <div class="card p-4"><p class="font-semibold text-white">Kabundji</p><p class="text-xs text-gray-500">Founder & CEO ‚Ä¢ Pulse Graphix</p></div>
        <div class="card p-4"><p class="font-semibold gradient-text">Alex Prime</p><p class="text-xs text-gray-500">AI Executive Agent ‚Ä¢ OpenClaw</p></div>
      </div>
    </div>
  </section>

  <!-- MEMORY TAB -->
  <section id="tab-memory" class="tab-content fade-in">
    <div class="mb-6">
      <h2 class="text-xl font-bold text-white">üß† Memory System</h2>
      <p class="text-sm text-gray-500">Agent memory files and workspace overview</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="card p-6">
        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Core Files</h3>
        <div id="memory-core" class="space-y-2"></div>
      </div>
      <div class="card p-6">
        <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Daily Memory Logs</h3>
        <div id="memory-daily" class="space-y-1 max-h-[400px] overflow-y-auto pr-2"></div>
      </div>
    </div>
    <div class="card p-6 mt-6">
      <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">üìÇ Workspace Stats</h3>
      <div id="workspace-stats" class="grid grid-cols-3 gap-4"></div>
    </div>
  </section>

  <!-- INTEGRATIONS TAB -->
  <section id="tab-integrations" class="tab-content fade-in">
    <div class="mb-6">
      <h2 class="text-xl font-bold text-white">üîå Integrations & Services</h2>
      <p class="text-sm text-gray-500">Connected platforms and API status</p>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="integrations-grid"></div>
    <div class="mt-8">
      <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">ü§ñ AI Models</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="models-grid"></div>
    </div>
  </section>

  <!-- SERVICES TAB -->
  <section id="tab-services" class="tab-content fade-in">
    <div class="mb-6">
      <h2 class="text-xl font-bold text-white">üõ†Ô∏è Agent Skills & Services</h2>
      <p class="text-sm text-gray-500">Installed capabilities</p>
    </div>
    <div class="flex flex-wrap gap-2" id="skills-grid"></div>
    <div class="card p-6 mt-8">
      <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">üìù Drafts & Documents</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3" id="drafts-grid"></div>
    </div>
  </section>

  <!-- GALLERY TAB -->
  <section id="tab-gallery" class="tab-content fade-in">
    <div class="mb-6">
      <h2 class="text-xl font-bold text-white">üé® Visual Asset Gallery</h2>
      <p class="text-sm text-gray-500">Social media graphics & brand assets</p>
    </div>
    <!-- Filter Buttons -->
    <div class="flex flex-wrap gap-2 mb-6" id="gallery-filters">
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="all">All Assets</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="pulse-graphix">Pulse Graphix</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="nexus-ai-academy">Nexus AI Academy</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="invest-in-congo">Invest in Congo</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="pulse-architects">Pulse Architects</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="profile">Profile Pictures</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="banner">Banners</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="post">Posts</button>
      <button class="gallery-filter-btn text-xs px-4 py-2 rounded-lg font-medium transition-all" data-filter="story">Stories</button>
    </div>
    <!-- Gallery Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4" id="gallery-grid"></div>
  </section>

  <!-- FILE EXPLORER TAB -->
  <section id="tab-downloads" class="tab-content fade-in">
    <div class="flex flex-col lg:flex-row gap-4 h-[calc(100vh-180px)] min-h-[500px]">
      <!-- Sidebar -->
      <div class="lg:w-80 w-full flex-shrink-0">
        <div class="card p-4 h-full overflow-hidden flex flex-col" style="background:rgba(30,30,30,0.6);backdrop-filter:blur(12px);">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-bold text-white flex items-center gap-2">
              <span class="w-7 h-7 rounded-lg bg-gradient-to-br from-[#FF6B35] to-[#F7931A] flex items-center justify-center text-xs">üìÅ</span>
              File Explorer
            </h3>
            <span id="fe-total" class="text-xs text-gray-500"></span>
          </div>
          <input id="fe-search" type="text" placeholder="üîç Search files..." class="w-full px-3 py-2 bg-[#1a1a1a] border border-[#2a2a2a] rounded-lg text-sm text-white placeholder-gray-600 outline-none focus:border-[#FF6B35] transition-colors mb-3">
          <div class="flex items-center gap-2 mb-3">
            <button id="fe-view-list" onclick="feSetView('list')" class="flex-1 py-1.5 text-xs font-medium rounded-lg bg-[#FF6B35]/20 text-[#FF6B35] transition-all" title="List view">‚ò∞ List</button>
            <button id="fe-view-grid" onclick="feSetView('grid')" class="flex-1 py-1.5 text-xs font-medium rounded-lg bg-[#2a2a2a] text-gray-500 transition-all" title="Grid view">‚äû Grid</button>
          </div>
          <div id="fe-tree" class="overflow-y-auto flex-1 space-y-0.5 text-sm pr-1"></div>
        </div>
      </div>
      <!-- Main Content -->
      <div class="flex-1 min-w-0">
        <div class="card h-full overflow-hidden flex flex-col" style="background:rgba(30,30,30,0.6);backdrop-filter:blur(12px);">
          <!-- Breadcrumb + Actions -->
          <div class="flex items-center justify-between px-4 py-3 border-b border-[#2a2a2a]">
            <div id="fe-breadcrumb" class="flex items-center gap-1 text-sm text-gray-400 overflow-x-auto flex-1 mr-3">
              <span class="text-gray-500">Select a file to preview</span>
            </div>
            <div class="flex items-center gap-2 flex-shrink-0">
              <button id="fe-download-btn" onclick="feDownloadFile()" class="hidden px-4 py-1.5 bg-gradient-to-r from-[#FF6B35] to-[#F7931A] text-white text-xs font-semibold rounded-lg hover:opacity-90 transition-opacity flex items-center gap-1.5 shadow-lg shadow-orange-900/20">‚¨áÔ∏è Download</button>
              <button id="fe-raw-btn" onclick="feToggleRaw()" class="hidden px-3 py-1.5 bg-[#2a2a2a] text-gray-300 text-xs font-medium rounded-lg hover:bg-[#333] transition-colors">{ } Raw</button>
            </div>
          </div>
          <!-- File Info Bar -->
          <div id="fe-info" class="hidden px-4 py-2 bg-[#161616] border-b border-[#2a2a2a]" style="display:none;">
            <div class="flex items-center gap-4 text-xs text-gray-500">
              <span id="fe-info-type" class="flex items-center gap-1"></span>
              <span id="fe-info-size"></span>
              <span id="fe-info-modified"></span>
            </div>
          </div>
          <!-- Preview Area -->
          <div id="fe-preview" class="flex-1 overflow-auto p-6">
            <div class="flex flex-col items-center justify-center h-full text-gray-600">
              <div class="w-20 h-20 rounded-2xl bg-gradient-to-br from-[#FF6B35]/20 to-[#F7931A]/10 flex items-center justify-center mb-4">
                <span class="text-4xl">üìÇ</span>
              </div>
              <p class="text-lg font-semibold text-gray-400">File Explorer</p>
              <p class="text-sm mt-1 text-gray-600">Browse and preview all project files</p>
              <p class="text-xs mt-3 text-gray-700">Click a folder or file in the sidebar to get started</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- LIGHTBOX MODAL -->
<div id="lightbox" class="fixed inset-0 z-[9998] bg-black/95 backdrop-blur-sm hidden items-center justify-center p-4" onclick="closeLightbox(event)">
  <button onclick="closeLightbox()" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-colors z-10" title="Close">‚úï</button>
  <button onclick="prevImage(event)" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-colors z-10" title="Previous">‚Äπ</button>
  <button onclick="nextImage(event)" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-colors z-10" title="Next">‚Ä∫</button>
  <div class="relative max-w-7xl max-h-[90vh] w-full flex flex-col items-center" onclick="event.stopPropagation()">
    <img id="lightbox-img" src="" alt="" class="max-w-full max-h-[80vh] object-contain rounded-lg shadow-2xl">
    <div class="mt-4 text-center">
      <p id="lightbox-title" class="text-white font-semibold text-lg"></p>
      <p id="lightbox-meta" class="text-gray-400 text-sm mt-1"></p>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="border-t border-[#2a2a2a] mt-12 py-6 text-center text-xs text-gray-600">
  Alex Prime ‚Äî Executive Dashboard ‚Ä¢ Auto-refreshes every 60s ‚Ä¢ Powered by OpenClaw
</footer>

<script>
let DATA = null;
let currentTier = 'all';
let currentGalleryFilter = 'all';
let currentLightboxIndex = 0;
let filteredGalleryAssets = [];

// Tab switching
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
  });
});

// Tier filtering
document.getElementById('tier-filters').addEventListener('click', e => {
  const btn = e.target.closest('.tier-filter');
  if (!btn) return;
  currentTier = btn.dataset.tier;
  renderProspects();
});

// Gallery filtering
document.getElementById('gallery-filters').addEventListener('click', e => {
  const btn = e.target.closest('.gallery-filter-btn');
  if (!btn) return;
  document.querySelectorAll('.gallery-filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  currentGalleryFilter = btn.dataset.filter;
  renderGallery();
});

async function loadData() {
  try {
    const res = await fetch('data.json?t=' + Date.now());
    DATA = await res.json();
    render();
  } catch (err) {
    console.error('Failed to load data:', err);
  }
}

function render() {
  if (!DATA) return;

  // Last updated
  const d = new Date(DATA.lastGenerated);
  document.getElementById('last-updated').textContent = 'Updated: ' + d.toLocaleString();

  renderOverview();
  renderTasks();
  renderProjects();
  renderProspects();
  renderApprovals();
  renderMemory();
  renderIntegrations();
  renderServices();
  renderGallery();
}

function renderOverview() {
  const stats = document.getElementById('hero-stats');
  const items = [
    { label: 'Completed', value: DATA.tasks.completed.length, icon: '‚úÖ' },
    { label: 'Pending', value: DATA.tasks.pending.length, icon: '‚è≥' },
    { label: 'Prospects', value: DATA.prospectLeads.length, icon: 'üéØ' },
    { label: 'Projects', value: DATA.projects.length, icon: 'üìÅ' },
  ];
  stats.innerHTML = items.map(s => `
    <div class="stat-card rounded-xl p-4 border border-[#2a2a2a]">
      <div class="text-2xl mb-1">${s.icon}</div>
      <div class="text-2xl font-black text-white">${s.value}</div>
      <div class="text-xs text-gray-500">${s.label}</div>
    </div>
  `).join('');

  // Blocked
  const blocked = document.getElementById('overview-blocked');
  blocked.innerHTML = DATA.tasks.blocked.filter(b => !b.name.includes('~~')).map(b => `
    <div class="flex items-start gap-3 p-3 rounded-lg bg-[#1a1a1a]">
      <span class="text-xs mt-0.5">${b.priority.includes('HIGH') ? 'üî¥' : b.priority.includes('MEDIUM') ? 'üü°' : 'üü¢'}</span>
      <div>
        <p class="text-sm text-white font-medium">${b.name}</p>
        <p class="text-xs text-gray-500">Needs: ${b.need}</p>
      </div>
    </div>
  `).join('');

  // Goals
  const goals = document.getElementById('overview-goals');
  goals.innerHTML = DATA.goals.business.map(g => `
    <div class="p-3 rounded-lg bg-[#1a1a1a]">
      <div class="flex justify-between items-center mb-2">
        <p class="text-sm text-white font-medium">${g.goal}</p>
        <span class="text-xs text-gray-500">${g.progress}%</span>
      </div>
      <div class="progress-bar h-1.5"><div class="progress-fill" style="width:${g.progress}%"></div></div>
    </div>
  `).join('');
}

function renderTasks() {
  const completed = DATA.tasks.completed;
  const pending = DATA.tasks.pending;
  const blocked = DATA.tasks.blocked;

  document.getElementById('completed-count').textContent = completed.length;
  document.getElementById('pending-count').textContent = pending.length;
  document.getElementById('blocked-count').textContent = blocked.length;

  // Stats
  document.getElementById('task-stats').innerHTML = [
    { label: 'Completed', count: completed.length, color: 'green' },
    { label: 'Pending', count: pending.length, color: 'yellow' },
    { label: 'Blocked', count: blocked.length, color: 'red' },
  ].map(s => `
    <div class="stat-card rounded-xl p-4 border border-[#2a2a2a]">
      <p class="text-${s.color}-400 text-xs font-semibold uppercase">${s.label}</p>
      <p class="text-3xl font-black text-white mt-1">${s.count}</p>
    </div>
  `).join('');

  document.getElementById('tasks-completed').innerHTML = completed.map(t => `
    <div class="p-3 rounded-lg bg-[#1a1a1a] text-sm"><span class="text-green-400 mr-2">‚úì</span>${esc(t.name)}</div>
  `).join('');

  document.getElementById('tasks-pending').innerHTML = pending.map(t => `
    <div class="p-3 rounded-lg bg-[#1a1a1a] text-sm"><span class="text-yellow-400 mr-2">‚óã</span>${esc(t.name)}</div>
  `).join('');

  document.getElementById('tasks-blocked').innerHTML = blocked.filter(b => !b.name.includes('~~')).map(b => `
    <div class="p-3 rounded-lg bg-[#1a1a1a] text-sm">
      <span class="mr-2">${b.priority.includes('HIGH') ? 'üî¥' : 'üü°'}</span>
      <span class="text-white font-medium">${esc(b.name)}</span>
      <span class="text-gray-500"> ‚Äî ${esc(b.need)}</span>
    </div>
  `).join('');
}

function renderProjects() {
  const grid = document.getElementById('projects-grid');
  grid.innerHTML = DATA.projects.map(p => {
    const statusColor = { active: 'text-green-400', review: 'text-yellow-400', completed: 'text-blue-400', planning: 'text-gray-400' }[p.status] || 'text-gray-400';
    return `
    <div class="card p-6">
      <div class="flex justify-between items-start mb-3">
        <h3 class="font-bold text-white">${esc(p.name)}</h3>
        <span class="${statusColor} text-xs font-semibold uppercase">${p.status}</span>
      </div>
      <p class="text-sm text-gray-400 mb-4">${esc(p.description)}</p>
      ${p.revenue ? `<p class="text-xs text-brand-gold mb-3">üí∞ ${esc(p.revenue)}</p>` : ''}
      <div class="flex items-center gap-3">
        <div class="progress-bar h-2 flex-1"><div class="progress-fill" style="width:${p.progress}%"></div></div>
        <span class="text-xs text-gray-500 font-mono">${p.progress}%</span>
      </div>
    </div>`;
  }).join('');
}

function renderProspects() {
  const tbody = document.getElementById('prospects-table');
  const leads = currentTier === 'all' ? DATA.prospectLeads : DATA.prospectLeads.filter(l => l.tier === currentTier);
  tbody.innerHTML = leads.map(l => `
    <tr class="border-b border-[#1a1a1a] hover:bg-[#1a1a1a] transition-colors">
      <td class="py-3 pr-4 text-gray-500">${l.id}</td>
      <td class="py-3 pr-4 text-white font-medium">${esc(l.name)}</td>
      <td class="py-3 pr-4 text-gray-400">${esc(l.type)}</td>
      <td class="py-3 pr-4 text-gray-500 text-xs">${esc(l.address)}</td>
      <td class="py-3 pr-4 text-gray-400">${esc(l.phone)}</td>
      <td class="py-3 pr-4"><span class="text-xs ${l.webStatus.includes('NO') ? 'text-red-400' : l.webStatus === 'VERIFY' ? 'text-yellow-400' : 'text-gray-400'}">${esc(l.webStatus)}</span></td>
      <td class="py-3"><span class="text-xs px-2 py-0.5 rounded-full tier-${l.tier}">${l.tier.toUpperCase()}</span></td>
    </tr>
  `).join('');
}

function renderApprovals() {
  const list = document.getElementById('approvals-list');
  list.innerHTML = DATA.approvals.map(a => `
    <div class="card p-5 ${a.priority === 'high' ? 'priority-high' : 'priority-medium'}">
      <div class="flex justify-between items-start">
        <div>
          <h4 class="font-semibold text-white">${esc(a.item)}</h4>
          <p class="text-xs text-gray-500 mt-1">üìÑ ${esc(a.file)} ‚Ä¢ Created: ${esc(a.created)}</p>
        </div>
        <span class="text-xs px-2 py-1 rounded-full ${a.priority === 'high' ? 'bg-red-500/20 text-red-400' : 'bg-yellow-500/20 text-yellow-400'} font-semibold uppercase">${a.priority}</span>
      </div>
    </div>
  `).join('');
}

function renderMemory() {
  document.getElementById('memory-core').innerHTML = DATA.memory.coreFiles.map(f => `
    <div class="p-3 rounded-lg bg-[#1a1a1a] text-sm flex items-center gap-2">
      <span class="text-brand-gold">üìÑ</span><span class="text-white font-mono text-xs">${esc(f)}</span>
    </div>
  `).join('');

  document.getElementById('memory-daily').innerHTML = DATA.memory.files.map(f => `
    <div class="px-3 py-2 rounded text-xs font-mono text-gray-400 hover:text-white hover:bg-[#1a1a1a] transition-colors">${esc(f)}</div>
  `).join('');

  document.getElementById('workspace-stats').innerHTML = [
    { label: 'Files', value: DATA.workspace.totalFiles },
    { label: 'Folders', value: DATA.workspace.totalFolders },
    { label: 'Last Commit', value: DATA.workspace.lastCommit },
  ].map(s => `
    <div class="text-center p-4 rounded-lg bg-[#1a1a1a]">
      <p class="text-2xl font-bold text-white">${s.value}</p>
      <p class="text-xs text-gray-500">${s.label}</p>
    </div>
  `).join('');
}

function renderIntegrations() {
  const icons = { GitHub: 'üêô', Vercel: '‚ñ≤', 'Google Workspace': 'üìß', Telegram: '‚úàÔ∏è', n8n: '‚ö°', 'Brave Search': 'üîç' };
  document.getElementById('integrations-grid').innerHTML = DATA.integrations.services.map(s => `
    <div class="card p-5">
      <div class="flex items-center gap-3 mb-2">
        <span class="text-2xl">${icons[s.name] || 'üîó'}</span>
        <div>
          <h4 class="font-semibold text-white">${esc(s.name)}</h4>
          <span class="text-xs font-semibold uppercase status-${s.status}">${s.status}</span>
        </div>
      </div>
      ${s.notes ? `<p class="text-xs text-gray-500 mt-1">${esc(s.notes)}</p>` : ''}
      ${s.user ? `<p class="text-xs text-gray-500 mt-1">User: ${esc(s.user)}</p>` : ''}
      ${s.url ? `<p class="text-xs text-gray-500 mt-1">${esc(s.url)}</p>` : ''}
    </div>
  `).join('');

  document.getElementById('models-grid').innerHTML = DATA.integrations.models.map(m => `
    <div class="card p-4">
      <p class="font-semibold text-white text-sm">${esc(m.model)}</p>
      <p class="text-xs text-gray-500">${esc(m.provider)} ‚Ä¢ ${esc(m.role)}</p>
      <span class="text-xs status-${m.status}">${m.status}</span>
    </div>
  `).join('');
}

function renderServices() {
  document.getElementById('skills-grid').innerHTML = DATA.skills.map(s => `
    <span class="px-3 py-1.5 rounded-lg bg-[#1e1e1e] border border-[#2a2a2a] text-sm text-gray-300 hover:border-brand-orange transition-colors">${esc(s)}</span>
  `).join('');

  document.getElementById('drafts-grid').innerHTML = DATA.drafts.map(d => `
    <div class="p-3 rounded-lg bg-[#1a1a1a] hover:bg-[#222] transition-colors">
      <p class="text-sm text-white font-medium truncate">${esc(d.name)}</p>
      <p class="text-xs text-gray-500 mt-1">Modified: ${esc(d.modified)}</p>
    </div>
  `).join('');
}

function renderGallery() {
  if (!DATA || !DATA.gallery) return;
  
  const grid = document.getElementById('gallery-grid');
  
  // Filter assets
  filteredGalleryAssets = currentGalleryFilter === 'all' 
    ? DATA.gallery 
    : DATA.gallery.filter(asset => {
        if (['pulse-graphix', 'nexus-ai-academy', 'invest-in-congo', 'pulse-architects'].includes(currentGalleryFilter)) {
          return asset.company.toLowerCase().replace(/\s+/g, '-') === currentGalleryFilter;
        }
        return asset.type.toLowerCase().includes(currentGalleryFilter);
      });
  
  // Set active filter button
  document.querySelectorAll('.gallery-filter-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.filter === currentGalleryFilter);
  });
  
  // Render cards
  grid.innerHTML = filteredGalleryAssets.map((asset, index) => `
    <div class="gallery-card" onclick="openLightbox(${index})">
      <div class="overflow-hidden">
        <img src="${asset.url}" alt="${esc(asset.name)}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x300/2a2a2a/888?text=Image+Not+Found'">
      </div>
      <div class="p-4">
        <div class="flex items-start justify-between mb-2">
          <h4 class="text-sm font-semibold text-white">${esc(asset.name)}</h4>
          <span class="text-xs px-2 py-0.5 rounded-full bg-brand-orange/20 text-brand-orange font-medium">${esc(asset.type)}</span>
        </div>
        <p class="text-xs text-gray-500 mb-2">${esc(asset.company)}</p>
        <div class="flex items-center justify-between">
          <span class="text-xs text-gray-600 font-mono">${esc(asset.dimensions)}</span>
          <button class="text-xs px-3 py-1 rounded-lg bg-gradient-to-r from-brand-orange to-brand-gold text-white font-medium hover:opacity-90 transition-opacity">View</button>
        </div>
      </div>
    </div>
  `).join('');
}

function openLightbox(index) {
  currentLightboxIndex = index;
  updateLightboxImage();
  document.getElementById('lightbox').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeLightbox(event) {
  if (!event || event.target.id === 'lightbox' || event.target.closest('button')) {
    document.getElementById('lightbox').classList.remove('show');
    document.body.style.overflow = '';
  }
}

function prevImage(event) {
  event.stopPropagation();
  currentLightboxIndex = (currentLightboxIndex - 1 + filteredGalleryAssets.length) % filteredGalleryAssets.length;
  updateLightboxImage();
}

function nextImage(event) {
  event.stopPropagation();
  currentLightboxIndex = (currentLightboxIndex + 1) % filteredGalleryAssets.length;
  updateLightboxImage();
}

function updateLightboxImage() {
  const asset = filteredGalleryAssets[currentLightboxIndex];
  if (!asset) return;
  document.getElementById('lightbox-img').src = asset.url;
  document.getElementById('lightbox-title').textContent = asset.name;
  document.getElementById('lightbox-meta').textContent = `${asset.company} ‚Ä¢ ${asset.type} ‚Ä¢ ${asset.dimensions}`;
}

// Keyboard navigation for lightbox
document.addEventListener('keydown', e => {
  const lightbox = document.getElementById('lightbox');
  if (!lightbox.classList.contains('show')) return;
  if (e.key === 'Escape') closeLightbox();
  if (e.key === 'ArrowLeft') prevImage(e);
  if (e.key === 'ArrowRight') nextImage(e);
});

function esc(s) { if (!s) return ''; const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  FILE EXPLORER (v2)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
(function() {
  let FE_FILES = [];
  let FE_TREE = {};
  let FE_CURRENT = null;
  let FE_RAW = false;
  let FE_VIEW = 'list';
  let FE_OPEN = new Set(['root','prospects','marketing','templates','business','research','docs']);
  let FE_LOADED = false;

  async function feInit() {
    if (FE_LOADED) return;
    try {
      const r = await fetch('file-index.json?t='+Date.now());
      const d = await r.json();
      FE_FILES = d.files||[];
      FE_LOADED = true;
      feBuildTree();
      feRenderSidebar();
      document.getElementById('fe-total').textContent = FE_FILES.length+' files';
    } catch(e) {
      document.getElementById('fe-tree').innerHTML='<p class="text-red-400/60 text-xs p-3">‚ö† Could not load file index</p>';
    }
  }

  function feBuildTree() {
    FE_TREE = {};
    FE_FILES.forEach(f => {
      const folder = f.folder || 'root';
      if (!FE_TREE[folder]) FE_TREE[folder] = [];
      FE_TREE[folder].push(f);
    });
  }

  function feGetHierarchy() {
    const h = {};
    Object.keys(FE_TREE).sort().forEach(path => {
      const parts = path.split('/');
      let cur = h;
      parts.forEach((p,i) => {
        if (!cur[p]) cur[p] = {_sub:{},_files:[]};
        if (i===parts.length-1) cur[p]._files = FE_TREE[path];
        cur = cur[p]._sub;
      });
    });
    return h;
  }

  function feCountIn(prefix) {
    let c=0;
    Object.keys(FE_TREE).forEach(k => {
      if (k===prefix||k.startsWith(prefix+'/')) c += FE_TREE[k].length;
    });
    return c;
  }

  function feRenderSidebar(filter) {
    const el = document.getElementById('fe-tree');
    if (filter) {
      const q = filter.toLowerCase();
      const m = FE_FILES.filter(f => f.name.toLowerCase().includes(q)||f.path.toLowerCase().includes(q)||f.category.includes(q));
      if (!m.length) { el.innerHTML='<div class="text-center py-8 text-gray-600"><p class="text-2xl">üîç</p><p class="text-xs mt-2">No files match "'+esc(filter)+'"</p></div>'; return; }
      el.innerHTML = '<div class="text-xs text-gray-600 mb-2 px-1">'+m.length+' results</div>' +
        m.map(f => {
          const act = FE_CURRENT&&FE_CURRENT.path===f.path;
          return '<div class="fe-file'+(act?' active':'')+'" onclick="feSelect(\''+f.path.replace(/'/g,"\\'")+'\')">' +
            '<span class="fe-file-icon">'+f.icon+'</span><div class="flex-1 min-w-0"><div class="fe-file-name">'+esc(f.name)+'</div>' +
            '<div class="text-[10px] text-gray-600 truncate">'+esc(f.folder)+'</div></div><span class="fe-file-size">'+f.sizeHuman+'</span></div>';
        }).join('');
      return;
    }
    el.innerHTML = feRenderFolders(feGetHierarchy(), '', 0);
  }

  function feRenderFolders(h, parent, depth) {
    let out = '';
    Object.keys(h).sort().forEach(key => {
      const node = h[key];
      const fp = parent ? parent+'/'+key : key;
      const open = FE_OPEN.has(fp);
      const cnt = feCountIn(fp);
      const dn = key==='root' ? 'Root Files' : key;
      out += '<div class="fe-folder">';
      out += '<div class="fe-folder-header" onclick="feTog(\''+fp+'\')" style="padding-left:'+(depth*14)+'px">';
      out += '<span class="fe-chevron'+(open?' open':'')+'">‚ñ∂</span>';
      out += '<span>'+(open?'üìÇ':'üìÅ')+'</span>';
      out += '<span class="text-gray-300 font-medium flex-1 truncate">'+esc(dn)+'</span>';
      out += '<span class="fe-folder-count">'+cnt+'</span>';
      out += '</div>';
      out += '<div class="fe-folder-children'+(open?' open':'')+'">';
      const subK = Object.keys(node._sub).sort();
      if (subK.length) out += feRenderFolders(node._sub, fp, depth+1);
      if (node._files) {
        node._files.sort((a,b)=>a.name.localeCompare(b.name)).forEach(f => {
          const act = FE_CURRENT&&FE_CURRENT.path===f.path;
          out += '<div class="fe-file'+(act?' active':'')+'" onclick="feSelect(\''+f.path.replace(/'/g,"\\'")+'\')" style="padding-left:'+((depth+1)*14+6)+'px">';
          out += '<span class="fe-file-icon">'+f.icon+'</span>';
          out += '<span class="fe-file-name">'+esc(f.name)+'</span>';
          out += '<span class="fe-file-size">'+f.sizeHuman+'</span></div>';
        });
      }
      out += '</div></div>';
    });
    return out;
  }

  window.feTog = function(p) {
    FE_OPEN.has(p) ? FE_OPEN.delete(p) : FE_OPEN.add(p);
    feRenderSidebar(document.getElementById('fe-search').value.trim()||null);
  };

  window.feSelect = function(path) {
    const f = FE_FILES.find(x=>x.path===path);
    if (!f) return;
    FE_CURRENT = f;
    FE_RAW = false;
    feRenderSidebar(document.getElementById('fe-search').value.trim()||null);
    // Breadcrumb
    const parts = path.split('/');
    let bc = '<span class="cursor-pointer hover:text-[#FF6B35] transition-colors" onclick="feHome()">üìÅ Files</span>';
    parts.forEach((p,i) => {
      bc += '<span class="text-gray-600 mx-1">/</span>';
      bc += i===parts.length-1 ? '<span class="text-white font-medium">'+esc(p)+'</span>' : '<span class="text-gray-400">'+esc(p)+'</span>';
    });
    document.getElementById('fe-breadcrumb').innerHTML = bc;
    // Info
    document.getElementById('fe-info').style.display = 'block';
    document.getElementById('fe-info-type').innerHTML = f.icon+' '+f.category.toUpperCase();
    document.getElementById('fe-info-size').textContent = 'üì¶ '+f.sizeHuman;
    const dt = new Date(f.modified);
    document.getElementById('fe-info-modified').textContent = 'üïê '+dt.toLocaleDateString()+' '+dt.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
    // Buttons
    document.getElementById('fe-download-btn').classList.remove('hidden');
    document.getElementById('fe-raw-btn').classList.toggle('hidden', !f.content);
    document.getElementById('fe-raw-btn').textContent = '{ } Raw';
    // Preview
    fePreview(f);
  };

  function fePreview(f) {
    const el = document.getElementById('fe-preview');
    // Markdown
    if (f.category==='markdown' && f.content && !FE_RAW) {
      try { el.innerHTML = '<div class="fe-preview-md">'+marked.parse(f.content)+'</div>'; } 
      catch(e) { el.innerHTML = '<div class="fe-code-preview">'+esc(f.content)+'</div>'; }
      return;
    }
    // HTML
    if (f.category==='html') {
      if (f.content && !FE_RAW) {
        const blob = new Blob([f.content],{type:'text/html'});
        el.innerHTML = '<iframe src="'+URL.createObjectURL(blob)+'" class="w-full rounded-lg border border-[#2a2a2a]" style="min-height:600px;height:100%;background:#fff;" sandbox="allow-scripts allow-same-origin"></iframe>';
      } else if (f.content) {
        el.innerHTML = '<div class="fe-code-preview">'+esc(f.content)+'</div>';
      } else {
        el.innerHTML = '<iframe src="downloads/files/'+f.path+'" class="w-full rounded-lg border border-[#2a2a2a]" style="min-height:600px;height:100%;background:#fff;" sandbox="allow-scripts allow-same-origin"></iframe>';
      }
      return;
    }
    // Image
    if (f.category==='image') {
      el.innerHTML = '<div class="flex flex-col items-center justify-center h-full"><img src="downloads/files/'+f.path+'" alt="'+esc(f.name)+'" class="max-w-full max-h-[70vh] object-contain rounded-lg shadow-2xl border border-[#2a2a2a]"/><p class="text-sm text-gray-500 mt-4">'+esc(f.name)+' ‚Ä¢ '+f.sizeHuman+'</p></div>';
      return;
    }
    // Code / JSON / Script / CSS / Text
    if (f.content) {
      let code = f.content;
      if (f.category==='json' && !FE_RAW) { try { code=JSON.stringify(JSON.parse(code),null,2); } catch(e){} }
      el.innerHTML = '<div class="fe-code-preview">'+feSyntax(esc(code), f.category)+'</div>';
      return;
    }
    // Fallback
    el.innerHTML = '<div class="flex flex-col items-center justify-center h-full text-gray-500">' +
      '<div class="w-20 h-20 rounded-2xl bg-[#1e1e1e] border border-[#2a2a2a] flex items-center justify-center mb-4"><span class="text-4xl">'+f.icon+'</span></div>' +
      '<p class="text-lg font-medium text-gray-400">'+esc(f.name)+'</p><p class="text-sm mt-1">'+f.sizeHuman+' ‚Ä¢ '+f.category+'</p>' +
      '<button onclick="feDownload()" class="mt-5 px-6 py-2.5 bg-gradient-to-r from-[#FF6B35] to-[#F7931A] text-white font-semibold rounded-lg hover:opacity-90 shadow-lg shadow-orange-900/20">‚¨áÔ∏è Download File</button></div>';
  }

  function feSyntax(code, cat) {
    if (cat==='json') {
      return code.replace(/(&quot;.*?&quot;)\s*:/g,'<span style="color:#FF6B35">$1</span>:')
        .replace(/:\s*(&quot;.*?&quot;)/g,': <span style="color:#98c379">$1</span>')
        .replace(/:\s*(true|false|null)/g,': <span style="color:#e5c07b">$1</span>')
        .replace(/:\s*(\d+\.?\d*)/g,': <span style="color:#d19a66">$1</span>');
    }
    if (cat==='script') {
      return code.replace(/(#.*?)(\n|$)/g,'<span style="color:#5c6370">$1</span>$2')
        .replace(/\b(if|then|else|fi|for|do|done|while|case|esac|function|return|local|echo|set|export|mkdir|cp|rm|find|cat|chmod)\b/g,'<span style="color:#c678dd">$1</span>');
    }
    if (cat==='style') {
      return code.replace(/([\w-]+)\s*:/g,'<span style="color:#d19a66">$1</span>:')
        .replace(/(\{|\})/g,'<span style="color:#c678dd">$1</span>');
    }
    return code;
  }

  window.feDownload = window.feDownloadFile = function() {
    if (!FE_CURRENT) return;
    if (FE_CURRENT.content) {
      const blob = new Blob([FE_CURRENT.content],{type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download=FE_CURRENT.name;
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
      URL.revokeObjectURL(url);
    } else {
      const a = document.createElement('a'); a.href='downloads/files/'+FE_CURRENT.path; a.download=FE_CURRENT.name;
      document.body.appendChild(a); a.click(); document.body.removeChild(a);
    }
  };

  window.feToggleRaw = function() {
    if (!FE_CURRENT) return;
    FE_RAW = !FE_RAW;
    document.getElementById('fe-raw-btn').textContent = FE_RAW ? '‚ú® Preview' : '{ } Raw';
    fePreview(FE_CURRENT);
  };

  window.feHome = function() {
    FE_CURRENT = null; FE_RAW = false;
    document.getElementById('fe-download-btn').classList.add('hidden');
    document.getElementById('fe-raw-btn').classList.add('hidden');
    document.getElementById('fe-info').style.display = 'none';
    document.getElementById('fe-breadcrumb').innerHTML = '<span class="text-gray-500">Select a file to preview</span>';
    if (FE_VIEW==='grid') {
      feGridHome();
    } else {
      document.getElementById('fe-preview').innerHTML = 
        '<div class="flex flex-col items-center justify-center h-full text-gray-600">' +
        '<div class="w-20 h-20 rounded-2xl bg-gradient-to-br from-[#FF6B35]/20 to-[#F7931A]/10 flex items-center justify-center mb-4"><span class="text-4xl">üìÇ</span></div>' +
        '<p class="text-lg font-semibold text-gray-400">File Explorer</p>' +
        '<p class="text-sm mt-1 text-gray-600">'+FE_FILES.length+' files across '+Object.keys(FE_TREE).length+' folders</p>' +
        '<p class="text-xs mt-3 text-gray-700">Click a folder or file in the sidebar</p></div>';
    }
    feRenderSidebar(document.getElementById('fe-search').value.trim()||null);
  };

  function feGridHome() {
    const el = document.getElementById('fe-preview');
    const folders = Object.keys(FE_TREE).sort();
    el.innerHTML = '<div class="fe-grid">'+folders.map(f => {
      const dn = f==='root'?'Root Files':f.split('/').pop();
      return '<div class="fe-grid-item" onclick="feGridFolder(\''+f+'\')"><div class="fe-grid-icon">üìÅ</div><div class="fe-grid-name font-medium text-white">'+esc(dn)+'</div><div class="fe-grid-size">'+FE_TREE[f].length+' files</div></div>';
    }).join('')+'</div>';
  }

  window.feGridFolder = function(folder) {
    FE_OPEN.add(folder);
    const files = FE_TREE[folder]||[];
    const el = document.getElementById('fe-preview');
    el.innerHTML = '<div class="mb-4"><span class="text-sm text-gray-400 cursor-pointer hover:text-[#FF6B35]" onclick="feHome()">‚Üê Back</span><span class="text-white font-medium ml-3">'+esc(folder)+'</span></div>' +
      '<div class="fe-grid">'+files.map(f => '<div class="fe-grid-item" onclick="feSelect(\''+f.path.replace(/'/g,"\\'")+'\')">' +
        '<div class="fe-grid-icon">'+f.icon+'</div><div class="fe-grid-name">'+esc(f.name)+'</div><div class="fe-grid-size">'+f.sizeHuman+'</div></div>').join('')+'</div>';
  };

  window.feSetView = function(m) {
    FE_VIEW = m;
    document.getElementById('fe-view-list').className = 'flex-1 py-1.5 text-xs font-medium rounded-lg transition-all '+(m==='list'?'bg-[#FF6B35]/20 text-[#FF6B35]':'bg-[#2a2a2a] text-gray-500');
    document.getElementById('fe-view-grid').className = 'flex-1 py-1.5 text-xs font-medium rounded-lg transition-all '+(m==='grid'?'bg-[#FF6B35]/20 text-[#FF6B35]':'bg-[#2a2a2a] text-gray-500');
    if (!FE_CURRENT) feHome();
  };

  document.getElementById('fe-search').addEventListener('input', e => feRenderSidebar(e.target.value.trim()||null));

  // Load when tab is clicked
  document.querySelector('[data-tab="downloads"]').addEventListener('click', () => { if (!FE_LOADED) feInit(); });
  // Pre-load after 1.5s
  setTimeout(feInit, 1500);
})();
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// Initial load
loadData();

// Auto-refresh every 60 seconds
setInterval(() => {
  const dot = document.getElementById('refresh-indicator');
  dot.classList.replace('bg-green-500', 'bg-yellow-500');
  loadData().then(() => setTimeout(() => dot.classList.replace('bg-yellow-500', 'bg-green-500'), 500));
}, 60000);
</script>
</body>
</html>
